# Pipeline - segment by click ğŸš€
> -- siyi424, 2025/03/13

åªæ˜¯ä¸ªå°å·¥å…·å•¦ï¼Œæ–¹ä¾¿å›¾åƒé¢„å¤„ç†ï¼Œæ„å»ºæ•°æ®é›†ã€‚

## Features âœ¨
1. ä½¿ç”¨ ğŸ§ SAM2 é¢„è®­ç»ƒæƒé‡ï¼Œæ”¯æŒå¯¹å›¾ç‰‡ğŸ–¼ã€è§†é¢‘ğŸ¬(.mp4)ã€åºåˆ—ğŸ—‚ï¸(.jpg)è¿›è¡Œåˆ†å‰²ï¼›
2. ä½¿ç”¨é¼ æ ‡ç‚¹å‡»çš„æ–¹å¼ï¼š
å·¦é”®ç‚¹å‡»ğŸ‘†ï¼šæ·»åŠ ä¸€ä¸ªç‚¹ï¼Œå³å¢åŠ maskï¼›
å³é”®ç‚¹å‡»ğŸ‘‰ï¼šåˆ é™¤ï¼ˆä¸åˆ†å‰²ï¼‰ï¼Œå³å‡å°‘maskï¼›
3. å¯ä»¥è¿…é€Ÿé¢„è§ˆå½“å‰ clicked points çš„åˆ†å‰²æ•ˆæœï¼Œ
å¦‚æœä¸æ»¡æ„ï¼Œå¯ä»¥åœ¨ terminal é‡Œå›å¤ `n` é‡æ–°åˆ†å‰²ï¼›
å¦‚æœæ»¡æ„ï¼Œåˆ™å›å¤ `y` ä¿å­˜å½“å‰åˆ†å‰²ç»“æœï¼Œå¹¶æŒ‰ç…§å½“å‰çš„ mask å¯¹ it_num å¼ åç»­çš„åºåˆ—å›¾ç‰‡è¿›è¡Œè¿ç»­è¿½è¸ªä¸åˆ†å‰²ã€‚


## Usage - *eg. micro-CT mouse brain segmentation*

>å› ä¸ºå¤´éª¨å¯ä»¥è®¤ä¸ºæ˜¯åˆšæ€§ç‰©ä½“ï¼Œä¸”åˆ†å‰²æ—¶æ›´å‡†ç¡®ï¼Œæ‰€ä»¥ç”¨å¤´éª¨ï¼Œè€Œä¸æ˜¯å¤§è„‘å†…å®¹ç‰©è¿›è¡Œé…å‡†ã€‚

1. **Step 1**: é…ç½®ç¯å¢ƒï¼š
    1. ä½¿ç”¨ checkpoints é‡Œçš„ `download_ckpts.sh` ä¸‹è½½ğŸ§ SAM2 çš„é¢„è®­ç»ƒæƒé‡ï¼›
    2. pip install ... ä¾èµ–åº“ã€‚
2. **Step 2**: é€‰æ‹©ä¸€ä¸ªè§†é¢‘ğŸ¬(.mp4)æˆ–è€…ä¸€ä¸ªåºåˆ—ğŸ—‚ï¸(.jpg)è¿›è¡Œåˆ†å‰²ï¼›
å¦‚æœæ˜¯ CT DICOM imagesï¼Œå¯ä»¥ä½¿ç”¨:
    1.  `1_rename_dcms.py` é‡æ–°æŒ‰ç…§ `0ã€1ã€2ã€... ` çš„é¡ºåºé‡å‘½å dcms æ–‡ä»¶ï¼›
    2. `2_dicoms_to_frames.py` å°† dcms è½¬æ¢ä¸º jpgsã€‚
3. **Step 3**: è¿è¡Œ `3_seg_by_click_final_version.py`ï¼Œç‚¹å‡»å¾…åˆ†å‰²åŒºåŸŸï¼Œä¿å­˜åˆ†å‰²ç»“æœï¼›

**æ³¨æ„ï¼Œæ‰€æœ‰çš„è·¯å¾„ã€å‚æ•°ï¼Œéƒ½åœ¨config.pyé‡Œï¼ŒæŒ‰éœ€æ›´æ”¹**

--- 

## Results ğŸ
### pre_contrast åºåˆ—åˆ†å‰²
![pre_contrast](images/pre_contrast.png)

### post_contrast åºåˆ—åˆ†å‰²
![post_contrast](images/post_contrast.png)

